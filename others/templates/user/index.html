<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.thymeleaf.org/thymeleaf-extras-shiro">

<head>
  <meta charset="UTF-8">
  <title>商城首页</title>
  <link rel="icon" href="../img/icon.png" type="image/png">
  <script th:inline="javascript" type="text/javascript">
    var login = [[${ session.LoginUser }]];
  </script>
  <link rel="stylesheet" href="../lib/layui/css/layui.css">

  <!-- 引入样式 -->
  <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
  <link rel="stylesheet" href="../css/user/index.css"/>
  <!-- 引入组件库 -->
  <script src="https://cdn.bootcdn.net/ajax/libs/vue/2.5.6/vue.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/axios/0.21.0/axios.js"></script>
  <script src="https://unpkg.com/element-ui/lib/index.js"></script>
</head>

<body>
<div id="app">

  <div class="header">
    <div class="container">
      <div class="header-nav-left">
        <ul>
          <li class="header-nav-left-area">中国大陆</li>
          <li class="header-nav-left-login">
            <a href="/user/login">您好,{{nickName}}</a>
          </li>
          <li class="header-nav-left-register"><a href="/user/register">免费注册</a></li>
        </ul>
      </div>
      <div class="header-nav-right">
        <ul>
          <li><a href="#">关于我们</a></li>
          <li><a href="#">购物指南</a></li>
          <li><a href="/store/toLogin" target="_blank">成为商家</a></li>
          <li><a href="/shoppingCart">购物车</a></li>
          <li><a href="/user/toPersonalOrder">我的订单</a></li>
        </ul>
      </div>
    </div>
    <div class="header-bill">
      <div class="container">
        <div class="header-bill-img">
          <a href="#"><img src="../img/indexImg/06.png" width="100%" height="100%"></a>
        </div>
      </div>
    </div>
    <div class="header-main">
      <div class="container">
        <div class="header-main-left" onclick="javascript:location.replace(location.href);">
          <!--          <img src="../img/IconImg/logo.png" width="100%" height="100%">-->
        </div>
        <div class="header-main-center">
          <!-- 搜索框 -->
          <div class="header-main-center-height">
<!--            <el-autocomplete v-model="searchGoodsName" value-key="goodsName" :fetch-suggestions="querySearchAsync"-->
<!--                             placeholder="请输入内容" @select="handleSelect"></el-autocomplete>-->
            <el-autocomplete v-model="searchGoodsName" value-key="className" :fetch-suggestions="querySearchAsync" placeholder="请输入内容"
                             @select="handleSelect"></el-autocomplete>
            <el-button type="danger" icon="el-icon-search" @click="getSearchGoodsList"></el-button>
          </div>
          <!-- <div class="header-main-center-mid"></div> -->
          <div class="header-main-center-low">
            <ul>
              <li><a href="http://book.dangdang.com/" target="_bank">图书</a></li>
              <li><a href="http://e.dangdang.com/index_page.html" target="_bank">电子书</a></li>
              <li><a href="http://e.dangdang.com/new_original_index_page.html" target="_bank">网络文学</a>
              </li>
              <li><a href="http://fashion.dangdang.com/" target="_bank">服装</a></li>
              <li><a href="http://fashion.dangdang.com/sports" target="_bank">户外运动</a></li>
              <li><a href="http://baobao.dangdang.com/" target="_bank">孕婴童</a></li>
              <li><a href="http://living.dangdang.com/" target="_bank">家居</a></li>
              <li><a href="http://ddyoupin.dangdang.com/" target="_bank">食品</a></li>
              <li><a href="http://store.dangdang.com/528" target="_bank">Apple</a></li>
              <li><a href="http://3c.dangdang.com/" target="_bank">电器城</a></li>
            </ul>
          </div>
        </div>
        <div class="header-main-right">
          <img src="../img/indexImg/05.png" width="100%" height="100%">
        </div>
      </div>
    </div>
  </div>
  <div class="content">
    <div class="container">
      <div class="content-main">
        <div class="content-main-left">
          <ul>
            <li><a href="/user/toShowShop?id=2"><span>手机</span></a>/<span>运营商</span>/<span>数码</span></li>
            <li><a href="/user/toShowShop?id=1"><span>电脑</span></a>/<span>办公</span></li>
            <li><a href="/user/toShowShop?id=7"><span>图书</span>/<span>童书</span></a></li>
            <li><a href="/user/toShowShop?id=3"><span>服饰</span>/<span>内衣</span></a></li>
            <li><a href="/user/toShowShop?id=4"><span>鞋靴</span>/<span>箱包</span></a></li>
            <li><a href="javascript:void(0)"><span>运动户外</span></a></li>
            <li><a href="/user/toShowShop?id=5"><span>母婴</span></a></li>
            <li><a href="javascript:void(0)"><span>家纺</span>/<span>汽车</span></a></li>
            <li><a href="javascript:void(0)"><span>家具</span>/<span>家装</span>/<span>康体</span></a></li>
            <li><a href="javascript:void(0)"><span>美妆</span>/<span>个人护理</span>/<span>成人</span></a></li>
            <li><a href="/user/toShowShop?id=6"><span>食品</span>/<span>茶酒</span>/<span>生鲜</span></a></li>
            <li><a href="javascript:void(0)"><span>腕表</span>/<span>珠宝饰品</span>/<span>眼镜</span></a></li>
            <li><a href="/user/toShowShop?id=1"><span>家用电器</span></a></li>
            <li><a href="javascript:void(0)"><span>医疗器械</span></a></li>
          </ul>
        </div>
        <!--轮播图-->
        <div class="content-main-center">
          <div class="block">
            <el-carousel>
              <el-carousel-item v-for="carousel in carouselData">
                <img :src=carousel.url @click="jumpGoodsDetail(carousel.jumpLink)">
              </el-carousel-item>
            </el-carousel>
          </div>
        </div>
        <div v-for="">

        </div>
        <div class="content-main-right">
          <ul>
            <li><img src="../img/indexImg/06.jpg.webp" width="100%" height="100%"></li>
            <li><img src="../img/indexImg/07.jpg.webp" width="100%" height="100%"></li>
            <li><img src="../img/indexImg/08.jpg.webp" width="100%" height="100%"></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="content2">
    <div class="container">
      <div class="content2-sale">
        <div class="content2-sale-left">
          <div class="content2-sale-left-top">
            <div class="content2-sale-left-top-left">
              每日特价
            </div>
            <div class="content2-sale-left-top-right">
              <span>精选</span>
              <span>美食</span>
              <span>百货</span>
              <span>个护</span>
              <span>预告</span>
            </div>
          </div>
          <div class="content2-sale-left-bottom">
            <div class="content2-sale-left-bottom-left">
              <ul>
                <li class="content2-sale-left-bottom-left-img">
                  <img src="../img/indexImg/16.jpg.webp" width="100%" height="100%">
                </li>
                <li class="content2-sale-left-bottom-left-detail">
                  品质石榴10斤装
                </li>
                <li class="content2-sale-left-bottom-left-price">
                  <span>9.9</span>
                </li>
              </ul>
            </div>
            <div class="content2-sale-left-bottom-right">
              <div class="content2-sale-left-bottom-right-demo">
                <div class="content2-sale-left-bottom-right-img">
                  <img src="../img/indexImg/17.jpg.webp" width="100%" height="100%">
                </div>
                <div class="content2-sale-left-bottom-right-detail">
                  <span>贝贝板栗香小南瓜3斤装</span><br/>
                  <span class="mark">$</span>
                  <span class="content2-sale-left-bottom-right-detail-price">15.2</span><br/>
                  <span
                          class="content2-sale-left-bottom-right-detail-panic">已抢<span>325</span>件</span>
                </div>
              </div>
              <div class="content2-sale-left-bottom-right-demo">
                <div class="content2-sale-left-bottom-right-img">
                  <img src="../img/indexImg/18.jpg.webp" width="100%" height="100%">
                </div>
                <div class="content2-sale-left-bottom-right-detail">
                  <span>羔羊羊排羊肋排生鲜羊排骨</span><br/>
                  <span class="mark">$</span>
                  <span class="content2-sale-left-bottom-right-detail-price">89.0</span><br/>
                  <span
                          class="content2-sale-left-bottom-right-detail-panic">已抢<span>325</span>件</span>
                </div>
              </div>
              <div class="content2-sale-left-bottom-right-demo">
                <div class="content2-sale-left-bottom-right-img">
                  <img src="../img/indexImg/19.jpg.webp" width="100%" height="100%">
                </div>
                <div class="content2-sale-left-bottom-right-detail">
                  <span>金枕头榴莲一个装3-4斤净果</span><br/>
                  <span class="mark">$</span>
                  <span class="content2-sale-left-bottom-right-detail-price">89.9</span><br/>
                  <span
                          class="content2-sale-left-bottom-right-detail-panic">已抢<span>325</span>件</span>
                </div>
              </div>
              <div class="content2-sale-left-bottom-right-demo">
                <div class="content2-sale-left-bottom-right-img">
                  <img src="../img/indexImg/20.jpg.webp" width="100%" height="100%">
                </div>
                <div class="content2-sale-left-bottom-right-detail">
                  <span>两件7.5折 炭烧腰果仁250g</span><br/>
                  <span class="mark">$</span>
                  <span class="content2-sale-left-bottom-right-detail-price">19.9</span><br/>
                  <span
                          class="content2-sale-left-bottom-right-detail-panic">已抢<span>325</span>件</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="content2-sale-right">
          <div class="content2-sale-left-top">
            <div class="content2-sale-left-top-left">
              每日特价
            </div>
            <div class="content2-sale-left-top-right">
              <span>精选</span>
              <span>美食</span>
              <span>百货</span>
              <span>个护</span>
              <span>预告</span>
            </div>
          </div>
          <div class="content2-sale-left-bottom">
            <div class="content2-sale-left-bottom-left">
              <ul>
                <li class="content2-sale-left-bottom-left-img">
                  <img src="../img/indexImg/21.jpg.webp" width="100%" height="100%">
                </li>
                <li class="content2-sale-left-bottom-left-detail">
                  阿道夫净屑舒爽洗发水248ml
                </li>
                <li class="content2-sale-left-bottom-left-price">
                  $ <span>36.0</span>
                </li>
              </ul>
            </div>
            <div class="content2-sale-left-bottom-right">
              <div class="content2-sale-left-bottom-right-demo">
                <div class="content2-sale-left-bottom-right-img">
                  <img src="../img/indexImg/22.jpg.webp" width="100%" height="100%">
                </div>
                <div class="content2-sale-left-bottom-right-detail">
                  <span>潘婷3分钟奇迹奢护精华霜</span><br/>
                  <span class="mark">$</span>
                  <span class="content2-sale-left-bottom-right-detail-price">34.9</span><br/>
                  <span
                          class="content2-sale-left-bottom-right-detail-panic">已抢<span>325</span>件</span>
                </div>
              </div>
              <div class="content2-sale-left-bottom-right-demo">
                <div class="content2-sale-left-bottom-right-img">
                  <img src="../img/indexImg/23.jpg.webp" width="100%" height="100%">
                </div>
                <div class="content2-sale-left-bottom-right-detail">
                  <span>阿道夫免洗护发精油75g</span><br/>
                  <span class="mark">$</span>
                  <span class="content2-sale-left-bottom-right-detail-price">39.0</span><br/>
                  <span
                          class="content2-sale-left-bottom-right-detail-panic">已抢<span>325</span>件</span>
                </div>
              </div>
              <div class="content2-sale-left-bottom-right-demo">
                <div class="content2-sale-left-bottom-right-img">
                  <img src="../img/indexImg/24.jpg.webp" width="100%" height="100%">
                </div>
                <div class="content2-sale-left-bottom-right-detail">
                  <span>15%尿素霜保湿去鸡皮手足皲裂</span><br/>
                  <span class="mark">$</span>
                  <span class="content2-sale-left-bottom-right-detail-price">15.79</span><br/>
                  <span
                          class="content2-sale-left-bottom-right-detail-panic">已抢<span>325</span>件</span>
                </div>
              </div>
              <div class="content2-sale-left-bottom-right-demo">
                <div class="content2-sale-left-bottom-right-img">
                  <img src="../img/indexImg/25.jpg.webp" width="100%" height="100%">
                </div>
                <div class="content2-sale-left-bottom-right-detail">
                  <span>【买1送1】生姜洗发水500ml</span><br/>
                  <span class="mark">$</span>
                  <span class="content2-sale-left-bottom-right-detail-price">49.0</span><br/>
                  <span
                          class="content2-sale-left-bottom-right-detail-panic">已抢<span>325</span>件</span>
                </div>
              </div>
            </div>
          </div>


        </div>
      </div>
    </div>
  </div>
  <div class="footer">
    <div class="container">
      <div class="footer-title">

      </div>
    </div>
  </div>

  <div class="content-main-right-page">
    <div class="content-main-right-lt"><img src="../img/iconImg/上一页.png"></div>
    <div class="content-main-right-gt"><img src="../img/iconImg/下一页.png"></div>
  </div>

</div>
</body>

<script src="https://cdn.bootcdn.net/ajax/libs/layui/2.5.6/layui.min.js"></script>

</html>
<script>
  var app = new Vue({
    el: '#app',
    data() {
      return {
        nickName: '请登录',
        carouselData: {},
        // serviceUrl: 'http://127.0.0.1:8080',
        serviceUrl: '',
        searchGoodsName: '',
        timeout: null,
      }
    },
    created() {
      this.getSearchGoodsList();
      // 获取轮播信息
      axios.get('/admin/carousel/getShowData')
          .then(
              response => {
                this.carouselData = response.data;
              }
          );
      this.init();
    },
    mounted() {

    },

    methods: {
      // 获取初始信息
      init() {
        axios.post(this.serviceUrl + '/user/getBaseInfo').then(
            response => {
              let result = response.data;
              let respMap = result.respMap;
              this.shoppingCartCount = respMap.shoppingCartCount;
              this.nickName = respMap.nickName;

            }
        );
      },
      querySearchAsync(queryString, cb) {
        console.log(this.searchGoodsName)
        this.getSearchGoodsList();
        // var results = queryString ? this.data_in.filter(this.createStateFilter(queryString)) : this.data_in;

        // cb(this.data_in);
        clearTimeout(this.timeout);
        this.timeout = setTimeout(() => {
          cb(this.data_in);
        }, 150);
      },
      handleSelect(item) {
        console.log("处理")
        console.log(item);
        // 传送第三级ID
        window.location.href = this.serviceUrl + '/user/toShowShop?id=' + item.secondId + '&cId=' + item.id;

      },
      // 获取查找的信息
      getSearchGoodsList() {
        const params = new URLSearchParams();
        params.append('goodsName', this.searchGoodsName);
        axios.post(this.serviceUrl + '/thirdClass/queryByName', params).then(
            response => {
              console.log(response.data);

              if (response.data.code == '0') {
                this.data_in = response.data.data;
              } else {}
            }
        );
      },
      // 点击轮播图跳转
      jumpGoodsDetail(jumpUrl){
        window.location.href = jumpUrl;
      }

    },
  })

</script>

<script type="text/javascript" src="../js/lib/jquery-3.4.1.min.js"></script>
<script type="text/javascript">
  var carouselNum = 0;
  $(function () {

    window.setInterval(function () {
      if (carouselNum >= 0 && carouselNum < 3) {
        carouselNum++;
        $(".content-main-center-carousel").animate({'margin-left': "-=700px"}, 800);
      }
    }, 5000)


    $(".content-main-right").mouseover(function () {
      $(".content-main-right-lt").css({"display": "block"});
      $(".content-main-right-gt").css({"display": "block"});
    })
    $(".content-main-right-lt").mouseover(function () {
      $(".content-main-right-lt").css({"display": "block"});
      $(".content-main-right-gt").css({"display": "block"});
    })
    $(".content-main-right-gt").mouseover(function () {
      $(".content-main-right-lt").css({"display": "block"});
      $(".content-main-right-gt").css({"display": "block"});
    })
    $(".content-main-right").mouseleave(function () {
      $(".content-main-right-lt").css({"display": "none"});
      $(".content-main-right-gt").css({"display": "none"});
    })

    // 点击“我的购物车”按钮
    $(".header-main-center-height-cart").click(function () {
      window.location.href = "/shoppingCart";
    })

  })
</script>

